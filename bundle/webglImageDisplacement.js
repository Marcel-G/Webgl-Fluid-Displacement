var ImageDisplacement=function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=t(2),o=n(i),a=t(3),u=n(a),f=t(38),c=n(f),s=t(39),l=n(s),p=t(40),m=n(p),v=t(41),y={display:"block",backgroundColor:"black",height:"100%",width:"100%"},d=function(e,r){(0,u.default)(r).forEach(function(t){e.style[t]=r[t]})},x={position:{numComponents:2,data:[1,1,1,-1,-1,-1,1,1,-1,1,-1,-1]}},E=function(e,r){var t=r.getBoundingClientRect(),n=t.top,i=t.left,o=t.width,a=t.height,u=e.clientX,f=e.clientY,c=Math.min(Math.max((u-i)/o,0),1),s=Math.min(Math.max((f-n)/a,0),1);return{elementX:c,elementY:s}},h=function e(r){var t=this;(0,o.default)(this,e),this.updateMouse=function(e){if(!(e.touches&&e.touches.length>1)){var r=e.touches;r||(r=[{clientX:e.clientX,clientY:e.clientY}]);var n=E(r[0],t.element),i=[n.elementY,n.elementX],o=2*Math.abs(i[0]-.5);o<.1&&(o=0),t.intensity=o,t.pos=i}},this.render=function(e){t.intensityD-=(t.intensityD-t.intensity)/20,t.parralax[1]-=(t.parralax[1]-(t.pos[1]-.5)/5)/20,t.parralax[0]-=(t.parralax[0]-(t.pos[0]-.5)/5)/20,t.delta>0&&(t.delta-=1);var r={time:e,Period:2e-4,Parralax:[t.parralax[1],t.parralax[0]],resolution:[t.gl.canvas.width,t.gl.canvas.height]},n={Frequency:.7,Amplitude:.5,Intensity:t.intensityD,u_texSampler:t.texture,u_noiseSampler:t.framebufferInfo.attachments[0],resolution:[t.gl.canvas.width,t.gl.canvas.height]};(0,v.resizeCanvasToDisplaySize)(t.gl.canvas),(0,v.bindFramebufferInfo)(t.gl,t.framebufferInfo),t.gl.useProgram(t.noiseProgramInfo.program),(0,v.setBuffersAndAttributes)(t.gl,t.noiseProgramInfo,t.bufferInfo),(0,v.setUniforms)(t.noiseProgramInfo,r),(0,v.drawBufferInfo)(t.gl,t.bufferInfo),(0,v.bindFramebufferInfo)(t.gl,null),t.gl.useProgram(t.programInfo.program),(0,v.setBuffersAndAttributes)(t.gl,t.programInfo,t.bufferInfo),(0,v.setUniforms)(t.programInfo,n),(0,v.drawBufferInfo)(t.gl,t.bufferInfo),requestAnimationFrame(t.render)},this.pos=[0,0],this.parralax=[0,0],this.intensity=this.intensityD=0,this.subsideScale=500,this.imageSrc=r.imageSrc,this.element=r.element||document.body;var n=document.createElement("canvas");d(n,y);try{this.gl=(0,v.getWebGLContext)(n)}catch(e){this.gl=null}if(null!==this.gl)this.element.appendChild(n),window.addEventListener("mousemove",this.updateMouse),window.addEventListener("touchmove",this.updateMouse),this.programInfo=(0,v.createProgramInfo)(this.gl,[m.default,l.default]),this.noiseProgramInfo=(0,v.createProgramInfo)(this.gl,[m.default,c.default]),this.bufferInfo=(0,v.createBufferInfoFromArrays)(this.gl,x),this.framebufferInfo=(0,v.createFramebufferInfo)(this.gl),this.texture=(0,v.createTexture)(this.gl,{src:this.imageSrc,wrap:this.gl.CLAMP_TO_EDGE},function(){t.render()});else{var i=document.createElement("img");d(i,y),i.src=this.imageSrc,this.element.appendChild(i)}};e.exports=function(e){return new h(e)}},function(e,r){"use strict";r.__esModule=!0,r.default=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}},function(e,r,t){e.exports={default:t(4),__esModule:!0}},function(e,r,t){t(5),e.exports=t(25).Object.keys},function(e,r,t){var n=t(6),i=t(8);t(23)("keys",function(){return function(e){return i(n(e))}})},function(e,r,t){var n=t(7);e.exports=function(e){return Object(n(e))}},function(e,r){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,r,t){var n=t(9),i=t(22);e.exports=Object.keys||function(e){return n(e,i)}},function(e,r,t){var n=t(10),i=t(11),o=t(14)(!1),a=t(18)("IE_PROTO");e.exports=function(e,r){var t,u=i(e),f=0,c=[];for(t in u)t!=a&&n(u,t)&&c.push(t);for(;r.length>f;)n(u,t=r[f++])&&(~o(c,t)||c.push(t));return c}},function(e,r){var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},function(e,r,t){var n=t(12),i=t(7);e.exports=function(e){return n(i(e))}},function(e,r,t){var n=t(13);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,r){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,r,t){var n=t(11),i=t(15),o=t(17);e.exports=function(e){return function(r,t,a){var u,f=n(r),c=i(f.length),s=o(a,c);if(e&&t!=t){for(;c>s;)if(u=f[s++],u!=u)return!0}else for(;c>s;s++)if((e||s in f)&&f[s]===t)return e||s||0;return!e&&-1}}},function(e,r,t){var n=t(16),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,r){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},function(e,r,t){var n=t(16),i=Math.max,o=Math.min;e.exports=function(e,r){return e=n(e),e<0?i(e+r,0):o(e,r)}},function(e,r,t){var n=t(19)("keys"),i=t(21);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,r,t){var n=t(20),i="__core-js_shared__",o=n[i]||(n[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,r){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e,r){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},function(e,r){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,r,t){var n=t(24),i=t(25),o=t(34);e.exports=function(e,r){var t=(i.Object||{})[e]||Object[e],a={};a[e]=r(t),n(n.S+n.F*o(function(){t(1)}),"Object",a)}},function(e,r,t){var n=t(20),i=t(25),o=t(26),a=t(28),u="prototype",f=function(e,r,t){var c,s,l,p=e&f.F,m=e&f.G,v=e&f.S,y=e&f.P,d=e&f.B,x=e&f.W,E=m?i:i[r]||(i[r]={}),h=E[u],g=m?n:v?n[r]:(n[r]||{})[u];m&&(t=r);for(c in t)s=!p&&g&&void 0!==g[c],s&&c in E||(l=s?g[c]:t[c],E[c]=m&&"function"!=typeof g[c]?t[c]:d&&s?o(l,n):x&&g[c]==l?function(e){var r=function(r,t,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,t)}return new e(r,t,n)}return e.apply(this,arguments)};return r[u]=e[u],r}(l):y&&"function"==typeof l?o(Function.call,l):l,y&&((E.virtual||(E.virtual={}))[c]=l,e&f.R&&h&&!h[c]&&a(h,c,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,e.exports=f},function(e,r){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)},function(e,r,t){var n=t(27);e.exports=function(e,r,t){if(n(e),void 0===r)return e;switch(t){case 1:return function(t){return e.call(r,t)};case 2:return function(t,n){return e.call(r,t,n)};case 3:return function(t,n,i){return e.call(r,t,n,i)}}return function(){return e.apply(r,arguments)}}},function(e,r){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,r,t){var n=t(29),i=t(37);e.exports=t(33)?function(e,r,t){return n.f(e,r,i(1,t))}:function(e,r,t){return e[r]=t,e}},function(e,r,t){var n=t(30),i=t(32),o=t(36),a=Object.defineProperty;r.f=t(33)?Object.defineProperty:function(e,r,t){if(n(e),r=o(r,!0),n(t),i)try{return a(e,r,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[r]=t.value),e}},function(e,r,t){var n=t(31);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,r){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,r,t){e.exports=!t(33)&&!t(34)(function(){return 7!=Object.defineProperty(t(35)("div"),"a",{get:function(){return 7}}).a})},function(e,r,t){e.exports=!t(34)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,r){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,r,t){var n=t(31),i=t(20).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,r,t){var n=t(31);e.exports=function(e,r){if(!n(e))return e;var t,i;if(r&&"function"==typeof(t=e.toString)&&!n(i=t.call(e)))return i;if("function"==typeof(t=e.valueOf)&&!n(i=t.call(e)))return i;if(!r&&"function"==typeof(t=e.toString)&&!n(i=t.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,r){e.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}}},function(e,r){e.exports="precision highp float;\n#define GLSLIFY 1\nuniform vec2 resolution;\nuniform sampler2D u_mySampler;\nuniform float time;\nuniform float Period;\nuniform vec2 Parralax;\nvarying vec2 v_position;\n\n// http://www.nutty.ca/?page_id=352&link=refraction\n// Description : Array and textureless GLSL 3D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nfloat snoise(vec3 v)\n{\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  //Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nvoid main() {\n  float z = time * Period;\n  vec2 uv = (v_position + Parralax) * 1.5;\n  float value = (snoise(vec3(uv, z)) + 1.0) * 0.5;\n  vec4 greyscale = vec4(value, value, value, 1.0);\n  gl_FragColor = greyscale;\n}\n"},function(e,r){e.exports="precision highp float;\n#define GLSLIFY 1\nuniform vec2 resolution;\nuniform sampler2D u_noiseSampler;\nuniform sampler2D u_texSampler;\nuniform float Amplitude;\nuniform float Frequency;\nuniform float Intensity;\n\nvarying vec2 v_position;\nvarying vec2 v_texcoord;\n\nvec3 GetNormal () {\n  float sobelX[9];\n  sobelX[0] = 1.0; sobelX[1] = 0.0; sobelX[2] = -1.0;\n  sobelX[3] = 2.0; sobelX[4] = 0.0; sobelX[5] = -2.0;\n  sobelX[6] = 1.0; sobelX[7] = 0.0; sobelX[8] = -1.0;\n\n  float sobelY[9];\n  sobelY[0] = 1.0; sobelY[1] = 2.0; sobelY[2] =  1.0;\n  sobelY[3] = 0.0; sobelY[4] = 0.0; sobelY[5] =  0.0;\n  sobelY[6] = -1.0; sobelY[7] = -2.0; sobelY[8] = -1.0;\n\n  float texelX[9];\n  float texelY[9];\n  vec2 uv = (v_texcoord) * Frequency;\n  for (int i = 0; i < 9; i++)\n  {\n      vec4 otherTexel = texture2D(u_noiseSampler, uv);\n      float average = (otherTexel.x + otherTexel.y + otherTexel.z) / 3.0;\n      texelX[i] = average  * sobelX[i];\n      texelY[i] = average  * sobelY[i];\n  }\n  vec3 normal = vec3(\n    (texelX[0] + texelX[3] + texelX[6]) +\n    (texelX[2] + texelX[5] + texelX[8]),\n    (texelY[1] + texelY[2] + texelY[3]) +\n    (texelY[6] + texelY[7] + texelY[8]),\n    1.0 / Amplitude);\n\n  return normalize(normal);\n}\n\nvoid main() {\n  vec3 normal = GetNormal();\n  vec2 offset = (normal.xy + vec2(0, 0.25)) * Intensity;\n  vec2 uv = v_position * vec2(1.0, -0.5) + vec2(0, 0.5);\n  gl_FragColor.xyz = texture2D(u_texSampler, uv + offset).xyz;\n  gl_FragColor.w = 1.0;\n}\n"},function(e,r){e.exports="#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 v_position;\nvarying vec2 v_texcoord;\n\nvoid main() {\n  gl_Position = vec4(position, 0, 1);\n  v_position = position;\n  v_texcoord = position.xy * 0.5 + 0.5;\n}\n"},function(e,r,t){var n,i,o;/**
	 * @license twgl.js 2.1.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
	 * Available via the MIT license.
	 * see: http://github.com/greggman/twgl.js for details
	 */
/**
	 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
	 * Available via the MIT or new BSD license.
	 * see: http://github.com/jrburke/almond for details
	 */
!function(t,a){i=[],n=a,o="function"==typeof n?n.apply(r,i):n,!(void 0!==o&&(e.exports=o)),"undefined"!=typeof e&&e.exports?e.exports=a():t.twgl=a()}(this,function(){/**
	 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
	 * Available via the MIT or new BSD license.
	 * see: http://github.com/jrburke/almond for details
	 */
var e,r,t;return function(n){function i(e,r){return g.call(e,r)}function o(e,r){var t,n,i,o,a,u,f,c,s,l,p,m=r&&r.split("/"),v=E.map,y=v&&v["*"]||{};if(e&&"."===e.charAt(0))if(r){for(e=e.split("/"),a=e.length-1,E.nodeIdCompat&&b.test(e[a])&&(e[a]=e[a].replace(b,"")),e=m.slice(0,m.length-1).concat(e),s=0;s<e.length;s+=1)if(p=e[s],"."===p)e.splice(s,1),s-=1;else if(".."===p){if(1===s&&(".."===e[2]||".."===e[0]))break;s>0&&(e.splice(s-1,2),s-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((m||y)&&v){for(t=e.split("/"),s=t.length;s>0;s-=1){if(n=t.slice(0,s).join("/"),m)for(l=m.length;l>0;l-=1)if(i=v[m.slice(0,l).join("/")],i&&(i=i[n])){o=i,u=s;break}if(o)break;!f&&y&&y[n]&&(f=y[n],c=s)}!o&&f&&(o=f,u=c),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function a(e,r){return function(){var t=T.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),m.apply(n,t.concat([e,r]))}}function u(e){return function(r){return o(r,e)}}function f(e){return function(r){d[e]=r}}function c(e){if(i(x,e)){var r=x[e];delete x[e],h[e]=!0,p.apply(n,r)}if(!i(d,e)&&!i(h,e))throw new Error("No "+e);return d[e]}function s(e){var r,t=e?e.indexOf("!"):-1;return t>-1&&(r=e.substring(0,t),e=e.substring(t+1,e.length)),[r,e]}function l(e){return function(){return E&&E.config&&E.config[e]||{}}}var p,m,v,y,d={},x={},E={},h={},g=Object.prototype.hasOwnProperty,T=[].slice,b=/\.js$/;v=function(e,r){var t,n=s(e),i=n[0];return e=n[1],i&&(i=o(i,r),t=c(i)),i?e=t&&t.normalize?t.normalize(e,u(r)):o(e,r):(e=o(e,r),n=s(e),i=n[0],e=n[1],i&&(t=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:t}},y={notrequirebecasebrowserifymessesup:function(e){return a(e)},exports:function(e){var r=d[e];return"undefined"!=typeof r?r:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:l(e)}}},p=function(e,r,t,o){var u,s,l,p,m,E,g=[],T=typeof t;if(o=o||e,"undefined"===T||"function"===T){for(r=!r.length&&t.length?["notrequirebecasebrowserifymessesup","exports","module"]:r,m=0;m<r.length;m+=1)if(p=v(r[m],o),s=p.f,"notrequirebecasebrowserifymessesup"===s)g[m]=y.notrequirebecasebrowserifymessesup(e);else if("exports"===s)g[m]=y.exports(e),E=!0;else if("module"===s)u=g[m]=y.module(e);else if(i(d,s)||i(x,s)||i(h,s))g[m]=c(s);else{if(!p.p)throw new Error(e+" missing "+s);p.p.load(p.n,a(o,!0),f(s),{}),g[m]=d[s]}l=t?t.apply(d[e],g):void 0,e&&(u&&u.exports!==n&&u.exports!==d[e]?d[e]=u.exports:l===n&&E||(d[e]=l))}else e&&(d[e]=t)},e=r=m=function(e,r,t,i,o){if("string"==typeof e)return y[e]?y[e](r):c(v(e,r).f);if(!e.splice){if(E=e,E.deps&&m(E.deps,E.callback),!r)return;r.splice?(e=r,r=t,t=null):e=n}return r=r||function(){},"function"==typeof t&&(t=i,i=o),i?p(n,e,r,t):setTimeout(function(){p(n,e,r,t)},4),m},m.config=function(e){return m(e)},e._defined=d,t=function(e,r,t){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");r.splice||(t=r,r=[]),i(d,e)||i(x,e)||(x[e]=[e,r,t])},t.amd={jQuery:!0}}(),t("node_modules/almond/almond.js",function(){}),t("twgl/typedarrays",[],function(){function e(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return f;if(e instanceof Float32Array)return c;throw"unsupported typed array type"}function r(e){switch(e){case n:return Int8Array;case i:return Uint8Array;case o:return Int16Array;case a:return Uint16Array;case u:return Int32Array;case f:return Uint32Array;case c:return Float32Array;default:throw"unknown gl type"}}function t(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}var n=5120,i=5121,o=5122,a=5123,u=5124,f=5125,c=5126;return{getGLTypeForTypedArray:e,getTypedArrayTypeForGLType:r,isArrayBuffer:t}}),t("twgl/utils",[],function(){function e(e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function r(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})}function t(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})}function n(e){return parseFloat(e.getParameter(e.VERSION).substr(6))}function i(e){return 0===e.getParameter(e.VERSION).indexOf("WebGL 2.0")}function o(e){var r=n(e);return r<=1&&r>0}var a=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},u=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};return{copyExistingProperties:t,copyNamedProperties:r,shallowCopy:e,isWebGL1:o,isWebGL2:i,error:a,warn:u}}),t("twgl/attributes",["./typedarrays","./utils"],function(e,r){function t(e){E.attribPrefix=e}function n(e){r.copyExistingProperties(e,E)}function i(e,r,t,n,i){e.bindBuffer(r,t),e.bufferData(r,n,i||e.STATIC_DRAW)}function o(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var o=e.createBuffer();return i(e,t,o,r,n),o}function a(e){return"indices"===e}function u(e){return e instanceof Int8Array||e instanceof Uint8Array}function f(e){return e.length?e:e.data}function c(e,r){var t;if(t=h.test(e)?2:g.test(e)?4:3,r%t>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function s(e,r){return e.numComponents||e.size||c(r,f(e).length)}function l(r,t){if(e.isArrayBuffer(r))return r;if(e.isArrayBuffer(r.data))return r.data;Array.isArray(r)&&(r={data:r});var n=r.type;return n||(n=a(t)?Uint16Array:Float32Array),new n(r.data)}function p(r,t){var n={};return Object.keys(t).forEach(function(i){if(!a(i)){var f=t[i],c=f.attrib||f.name||f.attribName||E.attribPrefix+i,p=l(f,i);n[c]={buffer:o(r,p,void 0,f.drawType),numComponents:s(f,i),type:e.getGLTypeForTypedArray(p),normalize:void 0!==f.normalize?f.normalize:u(p),stride:f.stride||0,offset:f.offset||0,drawType:f.drawType}}}),n}function m(e,r,t,n){t=l(t),n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):i(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)}function v(r,t){var n={attribs:p(r,t)},i=t.indices;return i?(i=l(i,"indices"),n.indices=o(r,i,r.ELEMENT_ARRAY_BUFFER),n.numElements=i.length,n.elementType=e.getGLTypeForTypedArray(i)):n.numElements=T(t),n}function y(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,i=l(r,t);return o(e,i,n)}function d(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=y(e,r[n],n)}),t}function x(e,r,t){var n=e.createVertexArray();return e.bindVertexArray(n),r.length||(r=[r]),r.forEach(function(r){twgl.setBuffersAndAttributes(e,r,t)}),e.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}var E={attribPrefix:""},h=/coord|texture/i,g=/color|colour/i,T=function(){var e=["position","positions","a_position"];return function(r){for(var t,n=0;n<e.length&&(t=e[n],!(t in r));++n);n===e.length&&(t=Object.keys(r)[0]);var i=r[t],o=f(i).length,a=s(i,t),u=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return u}}();return{createAttribsFromArrays:p,createBuffersFromArrays:d,createBufferFromArray:y,createBufferFromTypedArray:o,createBufferInfoFromArrays:v,setAttribInfoBufferFromArray:m,createVertexArrayInfo:x,setAttributePrefix:t,setDefaults_:n,getNumComponents_:s,getArray_:f}}),t("twgl/programs",["./utils"],function(e){function r(e,r){return Ne[r].bindPoint}function t(e,r){return function(t){e.uniform1f(r,t)}}function n(e,r){return function(t){e.uniform1fv(r,t)}}function i(e,r){return function(t){e.uniform2fv(r,t)}}function o(e,r){return function(t){e.uniform3fv(r,t)}}function a(e,r){return function(t){e.uniform4fv(r,t)}}function u(e,r){return function(t){e.uniform1i(r,t)}}function f(e,r){return function(t){e.uniform1iv(r,t)}}function c(e,r){return function(t){e.uniform2iv(r,t)}}function s(e,r){return function(t){e.uniform3iv(r,t)}}function l(e,r){return function(t){e.uniform4iv(r,t)}}function p(e,r){return function(t){e.uniform1ui(r,t)}}function m(e,r){return function(t){e.uniform1uiv(r,t)}}function v(e,r){return function(t){e.uniform2uiv(r,t)}}function y(e,r){return function(t){e.uniform3uiv(r,t)}}function d(e,r){return function(t){e.uniform4uiv(r,t)}}function x(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function E(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function h(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function g(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function T(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function b(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function A(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function _(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function w(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function R(e,t,n,i){var o=r(e,t);return function(r){e.uniform1i(i,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(o,r)}}function P(e,t,n,i,o){for(var a=r(e,t),u=new Int32Array(o),f=0;f<o;++f)u[f]=n+f;return function(r){e.uniform1iv(i,u),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+u[t]),e.bindTexture(a,r)})}}function U(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}function I(e,r,t,n){var i=n||H,o=e.createShader(t),a=0;Ge.test(r)&&(a=1,r=r.replace(Ge,"")),e.shaderSource(o,r),e.compileShader(o);var u=e.getShaderParameter(o,e.COMPILE_STATUS);if(!u){var f=e.getShaderInfoLog(o);return i(U(r,a)+"\n*** Error compiling shader: "+f),e.deleteShader(o),null}return o}function S(e,r,t,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof t&&(i=t,t=void 0);var o=i||H,a=e.createProgram();r.forEach(function(r){e.attachShader(a,r)}),t&&t.forEach(function(r,t){e.bindAttribLocation(a,n?n[t]:t,r)}),e.linkProgram(a);var u=e.getProgramParameter(a,e.LINK_STATUS);if(!u){var f=e.getProgramInfoLog(a);return o("Error in program linking:"+f),e.deleteProgram(a),null}return a}function F(e,r,t,n){var i,o="",a=document.getElementById(r);if(!a)throw"*** Error: unknown script element"+r;if(o=a.text,!t)if("x-shader/x-vertex"===a.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===a.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return I(e,o,t?t:i,n)}function B(e,r,t,n,i){for(var o=[],a=0;a<r.length;++a){var u=F(e,r[a],e[Ye[a]],i);if(!u)return null;o.push(u)}return S(e,o,t,n,i)}function C(e,r,t,n,i){for(var o=[],a=0;a<r.length;++a){var u=I(e,r[a],e[Ye[a]],i);if(!u)return null;o.push(u)}return S(e,o,t,n,i)}function O(e,r){function t(r,t){var i=e.getUniformLocation(r,t.name),o=t.size>1&&"[0]"===t.name.substr(-3),a=t.type,u=Ne[a];if(!u)throw"unknown type: 0x"+a.toString(16);if(u.bindPoint){var f=n;return n+=t.size,o?u.arraySetter(e,a,f,i,t.size):u.setter(e,a,f,i,t.size)}return u.arraySetter&&o?u.arraySetter(e,i):u.setter(e,i)}for(var n=0,i={},o=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),a=0;a<o;++a){var u=e.getActiveUniform(r,a);if(!u)break;var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var c=t(r,u);i[f]=c}return i}function L(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],i=[],o=0;o<t;++o){i.push(o),n.push({});var a=e.getActiveUniform(r,o);if(!a)break;n[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var o=t[0],a=t[1];e.getActiveUniforms(r,i,e[o]).forEach(function(e,r){n[r][a]=e})});var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS);for(o=0;o<f;++o){var c=e.getActiveUniformBlockName(r,o),s={index:o,usedByVertexShader:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};s.used=s.usedByVertexSahder||s.usedByFragmentShader,u[c]=s}return{blockSpecs:u,uniformData:n}}function z(e,r,t,n){var i=t.blockSpecs,o=t.uniformData,a=i[n];if(!a)return K("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(a.size),f=e.createBuffer(),c=a.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,a.index,c);var s=n+".";ke.test(s)&&(s=s.replace(ke,"."));var l={};return a.uniformIndices.forEach(function(e){var r=o[e],t=Ne[r.type],n=t.Type,i=r.size*t.size,a=r.name;a.substr(0,s.length)===s&&(a=a.substr(s.length)),l[a]=new n(u,r.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:l}}function D(e,r,t){return z(e,r.program,r.uniformBlockSpec,t)}function M(e,r,t){var n=r.uniformBlockSpec||r,i=n.blockSpecs[t.name];if(i){var o=i.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function N(e,r,t){M(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)}function X(e,r){var t=e.uniforms;for(var n in r){var i=t[n];if(i){var o=r[n];o.length?i.set(o):i[0]=o}}}function G(e,r){for(var t=e.uniformSetters||e,n=arguments.length,i=1;i<n;++i){var o=arguments[i];if(Array.isArray(o))for(var a=o.length,u=0;u<a;++u)G(t,o[u]);else for(var f in o){var c=t[f];c&&c(o[f])}}}function Y(e,r){function t(r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0)}}function n(r,t){var n=t.size,i=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var o=t.size||t.numComponents||n,a=o/i,u=t.type||e.FLOAT,f=Ne[u],c=f.size*o,s=t.normalize||!1,l=t.offset||0,p=c/i,m=0;m<i;++m)e.enableVertexAttribArray(r+m),e.vertexAttribPointer(r+m,a,u,s,c,l+p*m)}}for(var i={},o=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),a=0;a<o;++a){var u=e.getActiveAttrib(r,a);if(!u)break;var f=e.getAttribLocation(r,u.name),c=Xe[u.type];c?i[u.name]=n(f,c):i[u.name]=t(f)}return i}function k(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function j(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(k(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))}function V(r,t){var n=O(r,t),i=Y(r,t),o={program:t,uniformSetters:n,attribSetters:i};return e.isWebGL2(r)&&(o.uniformBlockSpec=L(r,t)),o}function W(e,r,t,n,i){"function"==typeof n&&(i=n,n=void 0),"function"==typeof t&&(i=t,t=void 0);var o=i||H,a=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(o("no element with id: "+e),a=!1)}return e}),!a)return null;var u=C(e,r,t,n,i);return u?V(e,u):null}var H=e.error,K=e.warn,q=5126,Z=35664,$=35665,Q=35666,J=5124,ee=35667,re=35668,te=35669,ne=35670,ie=35671,oe=35672,ae=35673,ue=35674,fe=35675,ce=35676,se=35678,le=35680,pe=35679,me=35682,ve=35685,ye=35686,de=35687,xe=35688,Ee=35689,he=35690,ge=36289,Te=36292,be=36293,Ae=5125,_e=36294,we=36295,Re=36296,Pe=36298,Ue=36299,Ie=36300,Se=36303,Fe=36306,Be=36307,Ce=36308,Oe=36311,Le=3553,ze=34067,De=32879,Me=35866,Ne={};Ne[q]={Type:Float32Array,size:4,setter:t,arraySetter:n},Ne[Z]={Type:Float32Array,size:8,setter:i},Ne[$]={Type:Float32Array,size:12,setter:o},Ne[Q]={Type:Float32Array,size:16,setter:a},Ne[J]={Type:Int32Array,size:4,setter:u,arraySetter:f},Ne[ee]={Type:Int32Array,size:8,setter:c},Ne[re]={Type:Int32Array,size:12,setter:s},Ne[te]={Type:Int32Array,size:16,setter:l},Ne[Ae]={Type:Uint32Array,size:4,setter:p,arraySetter:m},Ne[_e]={Type:Uint32Array,size:8,setter:v},Ne[we]={Type:Uint32Array,size:12,setter:y},Ne[Re]={Type:Uint32Array,size:16,setter:d},Ne[ne]={Type:Uint32Array,size:4,setter:u,arraySetter:f},Ne[ie]={Type:Uint32Array,size:8,setter:c},Ne[oe]={Type:Uint32Array,size:12,setter:s},Ne[ae]={Type:Uint32Array,size:16,setter:l},Ne[ue]={Type:Float32Array,size:16,setter:x},Ne[fe]={Type:Float32Array,size:36,setter:E},Ne[ce]={Type:Float32Array,size:64,setter:h},Ne[ve]={Type:Float32Array,size:24,setter:g},Ne[ye]={Type:Float32Array,size:32,setter:b},Ne[de]={Type:Float32Array,size:24,setter:T},Ne[xe]={Type:Float32Array,size:48,setter:_},Ne[Ee]={Type:Float32Array,size:32,setter:A},Ne[he]={Type:Float32Array,size:48,setter:w},Ne[se]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Le},Ne[le]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:ze},Ne[pe]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:De},Ne[me]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Le},Ne[ge]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Me},Ne[Te]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Me},Ne[be]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:ze},Ne[Pe]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Le},Ne[Ue]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:De},Ne[Ie]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:ze},Ne[Se]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Me},Ne[Fe]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Le},Ne[Be]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:De},Ne[Ce]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:ze},Ne[Oe]={Type:null,size:0,setter:R,arraySetter:P,bindPoint:Me};var Xe={};Xe[ue]={size:4,count:2},Xe[fe]={size:9,count:3},Xe[ce]={size:16,count:4};var Ge=/^[ \t]*\n/,Ye=["VERTEX_SHADER","FRAGMENT_SHADER"],ke=/\[\d+\]\.$/;return{createAttributeSetters:Y,createProgram:S,createProgramFromScripts:B,createProgramFromSources:C,createProgramInfo:W,createProgramInfoFromProgram:V,createUniformSetters:O,createUniformBlockSpecFromProgram:L,createUniformBlockInfoFromProgram:z,createUniformBlockInfo:D,setAttributes:k,setBuffersAndAttributes:j,setUniforms:G,setUniformBlock:N,setBlockUniforms:X,bindUniformBlock:M}}),t("twgl/draw",["./programs"],function(e){function r(e,r,t,n,i){t=void 0===t?e.TRIANGLES:t;var o=r.indices,a=r.elementType,u=void 0===n?r.numElements:n;i=void 0===i?0:i,a||o?e.drawElements(t,u,void 0===a?e.UNSIGNED_SHORT:r.elementType,i):e.drawArrays(t,i,u)}function t(t,n){var i=null,o=null;n.forEach(function(n){if(n.active!==!1){var a=n.programInfo,u=n.vertexArrayInfo||n.bufferInfo,f=!1,c=void 0===n.type?t.TRIANGLES:n.type;a!==i&&(i=a,t.useProgram(a.program),f=!0),(f||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),o=u,e.setBuffersAndAttributes(t,a,u)),e.setUniforms(a,n.uniforms),r(t,u,c,n.count,n.offset)}}),o.vertexArrayObject&&t.bindVertexArray(null)}return{drawBufferInfo:r,drawObjectList:t}}),t("twgl/textures",["./typedarrays","./utils"],function(e,r){function t(e){R.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function n(e){r.copyExistingProperties(e,R),e.textureColor&&t(e.textureColor)}function i(e,r){void 0!==r.colorspaceConversion&&(O.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(O.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(O.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function o(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,O.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,O.flipY)}function a(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),t.min&&e.texParameteri(n,e.TEXTURE_MIN_FILTER,t.min),t.mag&&e.texParameteri(n,e.TEXTURE_MAG_FILTER,t.mag),t.wrap&&(e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrap),e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrap),n===e.TEXTURE_3D&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrap)),t.wrapR&&e.texParameteri(n,e.TEXTURE_WRAP_R,t.wrapR),t.wrapS&&e.texParameteri(n,e.TEXTURE_WRAP_S,t.wrapS),t.wrapT&&e.texParameteri(n,e.TEXTURE_WRAP_T,t.wrapT),t.minLod&&e.texParameteri(n,e.TEXTURE_MIN_LOD,t.minLod),t.maxLod&&e.texParameteri(n,e.TEXTURE_MAX_LOD,t.maxLod),t.baseLevel&&e.texParameteri(n,e.TEXTURE_BASE_LEVEL,t.baseLevel),t.maxLevel&&e.texParameteri(n,e.TEXTURE_MAX_LEVEL,t.maxLevel)}function u(e){return e=e||R.textureColor,P(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function f(e){return 0===(e&e-1)}function c(e,r,t,n,i){t=t||R.textureOptions;var o=t.target||e.TEXTURE_2D;n=n||t.width,i=i||t.height,e.bindTexture(o,r),f(n)&&f(i)?e.generateMipmap(o):(e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))}function s(e,r){return r=r||{},r.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function l(e,r){var t=s(e,r),n=t.map(function(e,r){return{face:e,ndx:r}});return n.sort(function(e,r){return e.face-r.face}),n}function p(){}function m(e,t,n){function i(){u.removeEventListener("error",o),u.removeEventListener("load",a),u=null}function o(){var t="couldn't load image: "+e;r.error(t),n(t,u),i()}function a(){n(null,u),i()}n=n||p;var u=new Image;return t=void 0!==t?t:R.crossOrigin,void 0!==t&&(u.crossOrigin=t),u.addEventListener("error",o),u.addEventListener("load",a),u.src=e,u}function v(e,r,t){t=t||R.textureOptions;var n=t.target||e.TEXTURE_2D;if(e.bindTexture(n,r),t.color!==!1){var i=u(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else n===e.TEXTURE_3D?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function y(e,t,n,i){i=i||p,n=n||R.textureOptions,v(e,t,n),n=r.shallowCopy(n);var o=m(n.src,n.crossOrigin,function(r,o){r?i(r,t,o):(L(e,t,o,n),i(null,t,o))});return o}function d(e,t,n,a){function u(r){return function(u,f){--x,u?E.push(u):f.width!==f.height?E.push("cubemap face img is not a square: "+f.src):(i(e,n),e.bindTexture(y,t),5===x?s(e).forEach(function(r){e.texImage2D(r,0,c,c,l,f)}):e.texImage2D(r,0,c,c,l,f),o(e,n),e.generateMipmap(y)),0===x&&a(E.length?E:void 0,d,t)}}a=a||p;var f=n.src;if(6!==f.length)throw"there must be 6 urls for a cubemap";var c=n.format||e.RGBA,l=n.type||e.UNSIGNED_BYTE,y=n.target||e.TEXTURE_2D;if(y!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";v(e,t,n),n=r.shallowCopy(n);var d,x=6,E=[],h=s(e,n);d=f.map(function(e,r){return m(e,n.crossOrigin,u(h[r]))})}function x(e){switch(e){case U:case F:return 1;case B:return 2;case I:return 3;case S:return 4;default:throw"unknown type: "+e}}function E(r,t){return P(t)?e.getGLTypeForTypedArray(t):r.UNSIGNED_BYTE}function h(e,r,t,n,i){if(i%1!==0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=i/n,t%1))throw"can't guess dimensions"}else if(n=i/t,n%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(r===e.TEXTURE_CUBE_MAP?6:1));o%1===0?(t=o,n=o):(t=i,n=1)}return{width:t,height:n}}function g(r,t,n,a){a=a||R.textureOptions;var u=a.target||r.TEXTURE_2D;r.bindTexture(u,t);var f=a.width,c=a.height,s=a.depth,p=a.format||r.RGBA,m=a.internalFormat||p,v=a.type||E(r,n),y=x(p),d=n.length/y;if(d%1)throw"length wrong size for format: "+C(r,p);var g;if(u===r.TEXTURE_3D)if(f||c||s)!f||c&&s?!c||f&&s?(g=h(r,u,f,c,d/s),f=g.width,c=g.height):(g=h(r,u,f,s,d/c),f=g.width,s=g.height):(g=h(r,u,c,s,d/f),c=g.width,s=g.height);else{var T=Math.cbrt(d);if(T%1!==0)throw"can't guess cube size of array of numElements: "+d;f=T,c=T,s=T}else g=h(r,u,f,c,d),f=g.width,c=g.height;if(P(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var b=e.getTypedArrayTypeForGLType(v);n=new b(n)}if(r.pixelStorei(r.UNPACK_ALIGNMENT,a.unpackAlignment||1),i(r,a),u===r.TEXTURE_CUBE_MAP){var A=d/6*y;l(r,a).forEach(function(e){var t=A*e.ndx,i=n.subarray(t,t+A);r.texImage2D(e.face,0,m,f,c,0,p,v,i)})}else u===r.TEXTURE_3D?r.texImage3D(u,0,m,f,c,s,0,p,v,n):r.texImage2D(u,0,m,f,c,0,p,v,n);return o(r,a),{width:f,height:c,depth:s}}function T(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var a=t.format||e.RGBA,u=t.internalFormat||a,f=t.type||e.UNSIGNED_BYTE;if(i(e,t),n===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,u,t.width,t.height,0,a,f,null);else n===e.TEXTURE_3D?e.texImage3D(n,0,u,t.width,t.height,t.depth,0,a,f,null):e.texImage2D(n,0,u,t.width,t.height,0,a,f,null);o(e,t)}function b(e,r,t){t=t||p,r=r||R.textureOptions;var n=e.createTexture(),i=r.target||e.TEXTURE_2D,o=r.width||1,u=r.height||1;e.bindTexture(i,n),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var f=r.src;if(f)if("function"==typeof f&&(f=f(e,r)),"string"==typeof f)y(e,n,r,t);else if(P(f)||Array.isArray(f)&&("number"==typeof f[0]||Array.isArray(f[0])||P(f[0]))){var s=g(e,n,f,r);o=s.width,u=s.height}else if(Array.isArray(f)&&"string"==typeof f[0])d(e,n,r,t);else{if(!(f instanceof HTMLElement))throw"unsupported src type";L(e,n,f,r),o=f.width,u=f.height}else T(e,n,r);return r.auto!==!1&&c(e,n,r,o,u),a(e,n,r),n}function A(e,r,t,n,i){n=n||t.width,i=i||t.height;var o=t.target||e.TEXTURE_2D;e.bindTexture(o,r);var a,u=t.format||e.RGBA,f=t.src;if(a=f&&(P(f)||Array.isArray(f)&&"number"==typeof f[0])?t.type||E(e,f):t.type||e.UNSIGNED_BYTE,o===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,u,n,i,0,u,a,null);else e.texImage2D(o,0,u,n,i,0,u,a,null)}function _(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function w(e,r,t){function n(){0===i&&setTimeout(function(){t(o.length?o:void 0,a,u)},0)}t=t||p;var i=0,o=[],a={},u={};return Object.keys(r).forEach(function(t){var f,c=r[t];_(c.src)&&(f=function(e,r,a){u[t]=a,--i,e&&o.push(e),n()},++i),a[t]=b(e,c,f)}),n(),a}var R={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},P=e.isArrayBuffer,U=6406,I=6407,S=6408,F=6409,B=6410,C=function(){function e(e){r||(r={},Object.keys(e).forEach(function(t){"number"==typeof e[t]&&(r[e[t]]=t)}))}var r;return function(t,n){return e(),r[n]||"0x"+n.toString(16)}}(),O={},L=function(){var e=document.createElement("canvas").getContext("2d");return function(r,t,n,u){u=u||R.textureOptions;var f=u.target||r.TEXTURE_2D,s=n.width,p=n.height,m=u.format||r.RGBA,v=u.internalFormat||m,y=u.type||r.UNSIGNED_BYTE;if(i(r,u),r.bindTexture(f,t),f===r.TEXTURE_CUBE_MAP){var d,x,E=n.width,h=n.height;if(E/6===h)d=h,x=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===E)d=E,x=[0,0,0,1,0,2,0,3,0,4,0,5];else if(E/3===h/2)d=E/3,x=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(E/2!==h/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);d=E/2,x=[0,0,1,0,0,1,1,1,0,2,1,2]}e.canvas.width=d,e.canvas.height=d,s=d,p=d,l(r,u).forEach(function(t){var i=x[2*t.ndx+0]*d,o=x[2*t.ndx+1]*d;e.drawImage(n,i,o,d,d,0,0,d,d),r.texImage2D(t.face,0,v,m,y,e.canvas)}),e.canvas.width=1,e.canvas.height=1}else if(f===r.TEXTURE_3D){var g=Math.min(n.width,n.height),T=Math.max(n.width,n.height),b=T/g;if(b%1!==0)throw"can not compute 3D dimensions of element";var A=n.width===T?1:0,_=n.height===T?1:0;r.texImage3D(f,0,v,g,g,g,0,m,y,null),e.canvas.width=g,e.canvas.height=g;for(var w=0;w<b;++w){var P=w*g*A,U=w*g*_,I=g,S=g,F=0,B=0,C=g,O=g;e.drawImage(n,P,U,I,S,F,B,C,O),r.texSubImage3D(f,0,0,0,w,m,y,e.canvas)}e.canvas.width=0,e.canvas.height=0}else r.texImage2D(f,0,v,m,y,n);o(r,u),u.auto!==!1&&c(r,t,u,s,p),a(r,t,u)}}();return{setDefaults_:n,createTexture:b,setEmptyTexture:T,setTextureFromArray:g,loadTextureFromUrl:y,setTextureFromElement:L,setTextureFilteringForSize:c,setTextureParameters:a,setDefaultTextureColor:t,createTextures:w,resizeTexture:A,getNumComponentsForFormat:x}}),t("twgl/framebuffers",["./textures","./utils"],function(e,r){function t(e){return _[e]}function n(e){return w[e]}function i(i,o,a,u){var f=i.FRAMEBUFFER,c=i.createFramebuffer();i.bindFramebuffer(f,c),a=a||i.drawingBufferWidth,u=u||i.drawingBufferHeight,o=o||A;var s=0,l={framebuffer:c,attachments:[],width:a,height:u};return o.forEach(function(o){var c=o.attachment,p=o.format,m=t(p);if(m||(m=x+s++),!c)if(n(p))c=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,c),i.renderbufferStorage(i.RENDERBUFFER,p,a,u);else{var v=r.shallowCopy(o);v.width=a,v.height=u,void 0===v.auto&&(v.auto=!1,v.min=v.min||i.LINEAR,v.mag=v.mag||i.LINEAR,v.wrapS=v.wrapS||v.wrap||i.CLAMP_TO_EDGE,v.wrapT=v.wrapT||v.wrap||i.CLAMP_TO_EDGE),c=e.createTexture(i,v)}if(c instanceof WebGLRenderbuffer)i.framebufferRenderbuffer(f,m,i.RENDERBUFFER,c);else{if(!(c instanceof WebGLTexture))throw"unknown attachment type";i.framebufferTexture2D(f,m,o.texTarget||i.TEXTURE_2D,c,o.level||0)}l.attachments.push(c)}),l}function o(r,t,n,i,o){i=i||r.drawingBufferWidth,o=o||r.drawingBufferHeight,t.width=i,t.height=o,n=n||A,n.forEach(function(n,a){var u=t.attachments[a],f=n.format;if(u instanceof WebGLRenderbuffer)r.bindRenderbuffer(r.RENDERBUFFER,u),r.renderbufferStorage(r.RENDERBUFFER,f,i,o);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";e.resizeTexture(r,u,n,i,o)}})}function a(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var u=5121,f=6402,c=6408,s=32854,l=32855,p=36194,m=33189,v=6401,y=36168,d=34041,x=36064,E=36096,h=36128,g=33306,T=33071,b=9729,A=[{format:c,type:u,min:b,wrap:T},{format:d}],_={};_[d]=g,_[v]=h,_[y]=h,_[f]=E,_[m]=E;var w={};return w[s]=!0,w[l]=!0,w[p]=!0,w[d]=!0,w[m]=!0,w[v]=!0,w[y]=!0,{bindFramebufferInfo:a,createFramebufferInfo:i,resizeFramebufferInfo:o}}),t("twgl/twgl",["./attributes","./draw","./framebuffers","./programs","./textures","./typedarrays","./utils"],function(e,r,t,n,i,o,a){function u(r){a.copyExistingProperties(r,d),e.setDefaults_(r),i.setDefaults_(r)}function f(e){if(e&&d.enableVertexArrayObjects&&a.isWebGL1(e)){var r=e.getExtension("OES_vertex_array_object");r&&(e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(e){r.deleteVertexArrayOES(e)},e.isVertexArray=function(e){return r.isVertexArrayOES(e)},e.bindVertexArray=function(e){r.bindVertexArrayOES(e)},e.VERTEX_ARRAY_BINDING=r.VERTEX_ARRAY_BINDING_OES)}}function c(e,r){for(var t=["webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function s(e,r){var t=c(e,r);return f(t),t}function l(e,r){for(var t=["webgl2","experimental-webgl2","webgl","experimental-webgl"],n=null,i=0;i<t.length;++i){try{n=e.getContext(t[i],r)}catch(e){}if(n)break}return n}function p(e,r){var t=l(e,r);return f(t),t}function m(e,r){r=r||1,r=Math.max(1,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)}function v(e){return"_"!==e[e.length-1]}function y(e,r){return Object.keys(e).filter(v).forEach(function(t){r[t]=e[t]}),r}var d={enableVertexArrayObjects:!0},x={getContext:p,getWebGLContext:s,isWebGL1:a.isWebGL1,isWebGL2:a.isWebGL2,resizeCanvasToDisplaySize:m,setDefaults:u},E={attributes:e,draw:r,framebuffers:t,programs:n,textures:i,typedArrays:o};return Object.keys(E).forEach(function(e){var r=E[e];y(r,x),x[e]=y(r,{})}),x}),t("main",["twgl/twgl"],function(e){return e}),r(["main"],function(e){return e},void 0,!0),t("build/js/twgl-includer",function(){}),r("main")})}]);
//# sourceMappingURL=webglImageDisplacement.js.map